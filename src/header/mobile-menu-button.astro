---
const size = 32;
---

<script>
  import { MOBILE_MENU_DIALOG_ID } from "./const";

  const mobileMenuDialog = document.getElementById(
    MOBILE_MENU_DIALOG_ID,
  ) as HTMLDialogElement;
  const animate = document.getElementById(
    "mobile-button-svg-animate",
  ) as unknown as SVGAnimateElement;
  const open = () => {
    mobileMenuDialog.show();
    animate.beginElement();
    animate.setAttribute(
      "values",
      "M5 5L12 5L19 5M5 12H19M5 19L12 19L19 19;M5 5L12 12L19 5M12 12H12M5 19L12 12L19 19",
    );
  };
  const close = () => {
    mobileMenuDialog.close();
    animate.beginElement();
    animate.setAttribute(
      "values",
      "M5 5L12 12L19 5M12 12H12M5 19L12 12L19 19;M5 5L12 5L19 5M5 12H19M5 19L12 19L19 19",
    );
  };

  const toggleMobileMenu = () => {
    if (mobileMenuDialog.open) {
      close();
    } else {
      open();
    }
  };

  document
    .getElementById("mobile-menu-button")!
    .addEventListener("click", toggleMobileMenu);
</script>

<button id="mobile-menu-button">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width={size}
    height={size}
    viewBox="0 0 24 24"
  >
    <path
      fill="none"
      stroke="currentColor"
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M5 5L12 5L19 5M5 12H19M5 19L12 19L19 19"
    >
      <animate
        id="mobile-button-svg-animate"
        fill="freeze"
        attributeName="d"
        dur="0.2s"
        begin="indefinite"
        values="M5 5L12 5L19 5M5 12H19M5 19L12 19L19 19;M5 5L12 12L19 5M12 12H12M5 19L12 12L19 19"
      ></animate>
    </path>
  </svg></button
>
